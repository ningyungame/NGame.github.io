/*!
 * TagCloud.js v2.2.2
 * Copyright (c) 2016-2021 @ Cong Min & applek
 * WordPress CorePress  Theme
 */
(function(g,k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define(k):(g=g||self,g.TagCloud=k())})(this,function(){function g(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}function k(c,a,b){a&&g(c.prototype,a);b&&g(c,b);return c}function m(){m=Object.assign||function(c){for(var a=1;a<arguments.length;a++){var b=arguments[a],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d])}return c};return m.apply(this,arguments)}function p(c,a){var b=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);a&&(d=d.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}));b.push.apply(b,d)}return b}function n(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?p(Object(b),!0).forEach(function(a){var d=b[a];a in c?Object.defineProperty(c,a,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[a]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):p(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var l=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,b=1<arguments.length?arguments[1]:void 0,d=2<arguments.length?arguments[2]:void 0,e=3<arguments.length?arguments[3]:void 0;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");if(!a||1!==a.nodeType)return Error("Incorrect element type");this.$container=a;this.texts=b||[];this.clors=e||[];this.config=n(n({},c._defaultConfig),d||{});this.radius=this.config.radius;this.depth=2*this.radius;this.size=1.5*this.radius;this.maxSpeed=c._getMaxSpeed(this.config.maxSpeed);this.initSpeed=c._getInitSpeed(this.config.initSpeed);this.direction=this.config.direction;this.keep=this.config.keep;this.paused=!1;this._createElment();this._init();c.list.push({el:this.$el,container:a,instance:this})}k(c,[{key:"_createElment",value:function(){var a=this,b=document.createElement("div");b.className=a.config.containerClass;a.config.useContainerInlineStyles&&(b.style.position="relative",b.style.height="".concat(2*a.radius,"px"));a.items=[];a.texts.forEach(function(d,c){var e=a._createTextItem(d,c);b.appendChild(e.el);a.items.push(e)});a.$container.appendChild(b);a.$el=b}},{key:"_createTextItem",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=document.createElement("span");d.className=this.config.itemClass;d.setAttribute("tag_id",b);var c=this.clors[Math.floor(Math.random()*this.clors.length)];this.config.useItemInlineStyles&&(d.style.willChange="transform, opacity, filter",d.style.position="absolute",d.style.top="50%",d.style.backgroundColor=c,d.style.left="50%",d.style.zIndex=b+1,d.style.filter="alpha(opacity\x3d0)",d.style.opacity=0);d.innerHTML='\x3ca href\x3d"'+a.href+'"\x3e'+a.text+"\x3c/a\x3e";return n({el:d},this._computePosition(b))}},{key:"_computePosition",value:function(a){var b=this.texts.length;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(a=Math.floor(Math.random()*(b+1)));var d=Math.acos(-1+(2*a+1)/b),b=Math.sqrt((b+1)*Math.PI)*d;return{x:this.size*Math.cos(b)*Math.sin(d)/2,y:this.size*Math.sin(b)*Math.sin(d)/2,z:this.size*Math.cos(d)/2}}},{key:"_requestInterval",value:function(a,b){function d(){h.value=c(d);(new Date).getTime()-f>=b&&(a.call(),f=(new Date).getTime())}var c=window.requestAnimationFrame,f=(new Date).getTime(),h={};h.value=c(d);return h}},{key:"_init",value:function(){var a=this;a.active=!1;a.mouseX0=a.initSpeed*Math.sin(Math.PI/180*a.direction);a.mouseY0=-a.initSpeed*Math.cos(Math.PI/180*a.direction);a.mouseX=a.mouseX0;a.mouseY=a.mouseY0;c._on(a.$el,"mouseover",function(){a.active=!0});c._on(a.$el,"click",function(b){b.target.className==a.config.itemClass&&console.log(b.target.getAttribute("tag_id"))});c._on(a.$el,"mouseout",function(){a.active=!1});c._on(a.keep?window:a.$el,"mousemove",function(b){b=b||window.event;var d=a.$el.getBoundingClientRect();a.mouseX=(b.clientX-(d.left+d.width/2))/5;a.mouseY=(b.clientY-(d.top+d.height/2))/5});a._next();a.interval=a._requestInterval(function(){a._next.call(a)},10)}},{key:"_next",value:function(){var a=this;if(!a.paused){a.keep||a.active||(a.mouseX=1>Math.abs(a.mouseX-a.mouseX0)?a.mouseX0:(a.mouseX+a.mouseX0)/2,a.mouseY=1>Math.abs(a.mouseY-a.mouseY0)?a.mouseY0:(a.mouseY+a.mouseY0)/2);var b=-(Math.min(Math.max(-a.mouseY,-a.size),a.size)/a.radius)*a.maxSpeed,d=Math.min(Math.max(-a.mouseX,-a.size),a.size)/a.radius*a.maxSpeed;if(!(.01>=Math.abs(b)&&.01>=Math.abs(d))){var c=Math.PI/180,f=[Math.sin(b*c),Math.cos(b*c),Math.sin(d*c),Math.cos(d*c)];a.items.forEach(function(b){var d=b.x,c=b.y*f[1]+b.z*-f[0],e=b.y*f[0]+b.z*f[1],h=e*f[3]-d*f[2],g=2*a.depth/(2*a.depth+h);b.x=d*f[3]+e*f[2];b.y=c;b.z=h;b.scale=g.toFixed(3);d=g*g-.25;d=(1<d?1:d).toFixed(3);c=b.el;e=(b.x-c.offsetWidth/2).toFixed(2);h=(b.y-c.offsetHeight/2).toFixed(2);b="translate3d(".concat(e,"px, ").concat(h,"px, 0) scale(").concat(b.scale,")");c.style.WebkitTransform=b;c.style.MozTransform=b;c.style.OTransform=b;c.style.transform=b;c.style.filter="alpha(opacity\x3d".concat(100*d,")");c.style.opacity=d})}}}},{key:"update",value:function(a){var b=this;b.texts=a||[];b.texts.forEach(function(a,d){var c=b.items[d];c||(c=b._createTextItem(a,d),m(c,b._computePosition(d,!0)),b.$el.appendChild(c.el),b.items.push(c));c.el.innerText=a});a=b.texts.length;var d=b.items.length;a<d&&b.items.splice(a,d-a).forEach(function(a){b.$el.removeChild(a.el)})}},{key:"destroy",value:function(){var a=this;a.interval=null;var b=c.list.findIndex(function(b){return b.el===a.$el});-1!==b&&c.list.splice(b,1);a.$container&&a.$el&&a.$container.removeChild(a.$el)}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}}],[{key:"_on",value:function(a,b,c,e){a.addEventListener?a.addEventListener(b,c,e):a.attachEvent?a.attachEvent("on".concat(b),c):a["on".concat(b)]=c}}]);return c}();l.list=[];l._defaultConfig={radius:100,maxSpeed:"normal",initSpeed:"normal",direction:135,keep:!0,useContainerInlineStyles:!0,useItemInlineStyles:!0,containerClass:"corepress-tagcloud",itemClass:"tagcloud--item"};l._getMaxSpeed=function(c){return{slow:.5,normal:1,fast:2}[c]||1};l._getInitSpeed=function(c){return{slow:16,normal:32,fast:80}[c]||32};return function(c,a,b,d){"string"===typeof c&&(c=document.querySelectorAll(c));c.forEach||(c=[c]);var e=[];c.forEach(function(c){c&&e.push(new l(c,a,b,d))});return 1>=e.length?e[0]:e}});